name: Slash Commands

on:
  issue_comment:
    types: [created]

jobs:
  deploy:
    if: ${{ github.event.issue.pull_request }}
    name: Check comments for /deploy
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Check for Command
        id: command
        uses: xt0rted/slash-command-action@v1
        with:
          command: deploy
          reaction: "false"
          repo-token: ${{ secrets.GHA_TOKEN }}
      - name: Dispatch Workflow
        if: steps.command.outputs.command-name == 'deploy'
        run: |
          echo "The command was '${{ steps.command.outputs.command-name }}' with arguments '${{ steps.command.outputs.command-arguments }}'"
          echo '{ "pr_number": ${{ github.event.issue.number }}, "author": ${{ github.event.issue.author }} }'
